function StringBuffer(){this.buffer=[]}function Utf8EncodeEnumerator(e){this._input=e;this._index=-1;this._buffer=[]}function Base64DecodeEnumerator(e){this._input=e;this._index=-1;this._buffer=[]}StringBuffer.prototype.append=function(t){this.buffer.push(t);return this};StringBuffer.prototype.toString=function e(){return this.buffer.join("")};var Base64={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t=new StringBuffer;var n=new Utf8EncodeEnumerator(e);while(n.moveNext()){var r=n.current;n.moveNext();var i=n.current;n.moveNext();var s=n.current;var o=r>>2;var u=(r&3)<<4|i>>4;var a=(i&15)<<2|s>>6;var f=s&63;if(isNaN(i)){a=f=64}else if(isNaN(s)){f=64}t.append(this.codex.charAt(o)+this.codex.charAt(u)+this.codex.charAt(a)+this.codex.charAt(f))}return t.toString()},decode:function(e){var t=new StringBuffer;var n=new Base64DecodeEnumerator(e);while(n.moveNext()){var r=n.current;if(r<128)t.append(String.fromCharCode(r));else if(r>191&&r<224){n.moveNext();var i=n.current;t.append(String.fromCharCode((r&31)<<6|i&63))}else{n.moveNext();var i=n.current;n.moveNext();var s=n.current;t.append(String.fromCharCode((r&15)<<12|(i&63)<<6|s&63))}}return t.toString()}};Utf8EncodeEnumerator.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();return true}else if(this._index>=this._input.length-1){this.current=Number.NaN;return false}else{var e=this._input.charCodeAt(++this._index);if(e==13&&this._input.charCodeAt(this._index+1)==10){e=10;this._index+=2}if(e<128){this.current=e}else if(e>127&&e<2048){this.current=e>>6|192;this._buffer.push(e&63|128)}else{this.current=e>>12|224;this._buffer.push(e>>6&63|128);this._buffer.push(e&63|128)}return true}}};Base64DecodeEnumerator.prototype={current:64,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();return true}else if(this._index>=this._input.length-1){this.current=64;return false}else{var e=Base64.codex.indexOf(this._input.charAt(++this._index));var t=Base64.codex.indexOf(this._input.charAt(++this._index));var n=Base64.codex.indexOf(this._input.charAt(++this._index));var r=Base64.codex.indexOf(this._input.charAt(++this._index));var i=e<<2|t>>4;var s=(t&15)<<4|n>>2;var o=(n&3)<<6|r;this.current=i;if(n!=64)this._buffer.push(s);if(r!=64)this._buffer.push(o);return true}}}